# HU-005 — Configurar Material UI (MUI) en Next.js (App Router)

**Como** desarrollador  
**Quiero** configurar **Material UI (MUI)** en el proyecto Next.js  
**Para** comenzar a construir UI con estilos consistentes y componentes listos para producción

---

## Dependencias

- Requiere HU-001 (Next.js App Router funcionando)
- Requiere HU-002 (estructura por capas en `src/`)
- (Recomendado) HU-004 para tener una página `/debug` donde validar visualmente

---

## Alcance

Incluye:
- Instalación de MUI (Material UI) y sus dependencias
- Configuración para Next.js App Router
- Setup de `ThemeProvider` global
- Configuración de caché/SSR para App Router usando el enfoque recomendado por MUI
- Uso mínimo de MUI en `/debug` (ej: `Button`, `Container`, `Typography`)

No incluye:
- Diseño final del producto
- Componentes complejos
- Redux / Supabase

---

## Criterios de aceptación (Given / When / Then)

### 1) Dependencias instaladas

- **Dado** el proyecto Next.js
- **Cuando** se instalen dependencias
- **Entonces** deben existir en `package.json`:
  - `@mui/material`
  - `@emotion/react`
  - `@emotion/styled`

Y opcionalmente (recomendado):
  - `@mui/icons-material`

---

### 2) Provider global

- **Dado** App Router
- **Cuando** se configure MUI globalmente
- **Entonces** debe existir un `ThemeProvider` aplicado a toda la app desde `src/app/layout.tsx`
  (o el layout principal donde viva el árbol del App Router).

---

### 3) Configuración App Router (cache / SSR)

- **Dado** Next.js App Router
- **Cuando** se configure MUI
- **Entonces** debe existir un provider de caché para MUI/Emotion compatible con App Router
  (por ejemplo, un componente `MuiProvider` en `src/presentation/providers/` o similar)
  siguiendo el patrón recomendado por MUI para App Router.

> Nota: No se busca “inventar” SSR. Solo aplicar el wrapper recomendado para evitar problemas de estilos/hidratación.

---

### 4) Tema básico

- **Dado** MUI instalado
- **Cuando** se cree el tema
- **Entonces** debe existir un archivo de tema base, por ejemplo:
  - `src/presentation/theme/theme.ts`

Y debe incluir al menos:
- `palette.mode = "light"` (default)
- `typography` básico (puede ser default)

---

### 5) Validación visual en /debug

- **Dado** la página `/debug`
- **Cuando** se actualice la UI
- **Entonces** el botón “Run debug” debe ser un `Button` de MUI y debe verse con estilo MUI.

Mínimo requerido:
- `Container`
- `Typography`
- `Button`

---

## Reglas técnicas

- No cambiar la arquitectura por capas.
- No agregar librerías de estilos adicionales (Tailwind, styled-components, etc.).
- No crear diseño avanzado; solo wiring + tema básico.
- El código de providers y tema debe vivir en Presentation (`src/presentation/...`).
- `Domain` e `Infrastructure` no deben conocer MUI.

---

## Implementación sugerida (estructura)

- `src/presentation/theme/theme.ts`
- `src/presentation/providers/MuiProvider.tsx` (o nombre equivalente)
- `src/app/layout.tsx` (usar el provider global)
- `src/app/debug/page.tsx` (reemplazar HTML por MUI)

---

## Validación

Ejecutar:

- `npm run dev`
- Abrir `http://localhost:3000/debug`
- Verificar que el botón y textos sean de MUI
- `npm run build` sin errores

---

## Definición de Hecho

- MUI instalado y configurado con App Router sin warnings críticos de estilos/hidratación
- Tema base creado
- `/debug` usando componentes MUI
- `npm run dev` OK
- `npm run build` OK
- Commit sugerido:
  `chore: setup mui`
