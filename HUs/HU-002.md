# HU-002 — Crear estructura por capas dentro de `src/` (Domain / Infrastructure / Presentation / Lib)

**Como** desarrollador  
**Quiero** crear la estructura de carpetas por capas dentro de `src/`  
**Para** garantizar separación de responsabilidades desde el inicio, conforme a la arquitectura

---

## Dependencias

- Requiere HU-001 completada.

---

## Criterios de aceptación (Given / When / Then)

1) **Estructura**
- **Dado** el proyecto Next.js funcionando
- **Cuando** se cree el directorio `src/`
- **Entonces** deben existir como mínimo:
  - `src/domain`
  - `src/infrastructure`
  - `src/presentation`
  - `src/lib`

2) **Estructura interna mínima**
- **Dado** `src/`
- **Cuando** se creen subcarpetas base
- **Entonces** deben existir:
  - `src/domain/models`
  - `src/domain/repositories`
  - `src/domain/usecases`
  - `src/infrastructure/config`
  - `src/infrastructure/ioc`
  - `src/presentation/pages` *(si se usa pages propias; con Next App Router se puede mapear a `src/app`, ver nota)*
  - `src/presentation/components`
  - `src/presentation/hooks`
  - `src/presentation/store`
  - `src/lib/errors`

3) **Compatibilidad con Next**
- **Dado** Next.js (App Router)
- **Cuando** se mueva el punto de entrada
- **Entonces** el proyecto debe seguir levantando en `npm run dev`.

4) **Documentación**
- **Dado** el repo
- **Cuando** se termine esta HU
- **Entonces** se debe actualizar el README (o `docs/`) indicando:
  - que la arquitectura vive en `docs/01_arquitectura.md`
  - y que el código se organiza bajo `src/` por capas.

---

## Reglas técnicas

- Respetar `docs/01_arquitectura.md`.
- No introducir lógica de negocio aún.
- No agregar Supabase aún.
- No agregar Redux aún.
- No agregar Inversify aún (eso va en HU-003).
- Crear `index.ts` vacíos en carpetas clave solo si ayuda a exports (opcional).

---

## Nota sobre Next.js (App Router)

Si el scaffold actual trae `app/` en la raíz, se debe:
- mover `app/` a `src/app/` (recomendado),
- y mantener `src/presentation` para UI reutilizable (components/hooks/store).

El routing de Next seguirá viviendo en `src/app`, pero los componentes/hook/store deben vivir en `src/presentation`.

---

## Archivos esperados (ejemplo mínimo)

- `src/domain/models/.gitkeep` (o archivo placeholder)
- `src/domain/repositories/.gitkeep`
- `src/domain/usecases/.gitkeep`
- `src/infrastructure/config/.gitkeep`
- `src/infrastructure/ioc/.gitkeep`
- `src/presentation/components/.gitkeep`
- `src/presentation/hooks/.gitkeep`
- `src/presentation/store/.gitkeep`
- `src/lib/errors/.gitkeep`

*(Puedes usar `.gitkeep` o un `README.md` mínimo por carpeta.)*

---

## Definición de Hecho

- `npm run dev` OK
- No se rompe el enrutamiento
- Estructura creada y commiteada
- Commit sugerido: `chore: add layered src structure`
