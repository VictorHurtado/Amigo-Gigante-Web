# HU-018 — Layout del dashboard con sidebar (reutilizable)

**Como** desarrollador  
**Quiero** un layout reutilizable con sidebar para el dashboard de fundaciones  
**Para** no duplicar código en múltiples páginas del área de administración

---

## Dependencias

- HU-005 (MUI configurado)
- HU-007 (Tailwind configurado)
- HU-008 (Design System centralizado)
- HU-009 (Logo en navbar)
- HU-010 (Atomic Design - componentes reutilizables)
- HU-016 (Sistema de traducciones configurado)

---

## Contexto / Notas

- Esta HU crea un **layout reutilizable** que será usado por todas las páginas del dashboard de fundaciones.
- El layout incluye: sidebar de navegación, header superior, y área de contenido principal.
- El sidebar debe ser responsive: oculto en móvil (con menú hamburguesa), visible en desktop.
- Este layout será usado por: perfil de fundación, dashboard principal, gestión de animales, adopciones, etc.
- **IMPORTANTE**: Al crear la rama para el PR, usar el nombre: `HU-018 - Layout del dashboard con sidebar`

---

## Diseño

Referencias:
- Diseño: `docs/design/code_profile_foundation_screen.html` (sección sidebar y header)
- Design System: `docs/design/system.md`

Estructura del layout:
- **Sidebar (desktop)**:
  - Logo + "Amigo Gigante" en la parte superior
  - Menú de navegación:
    - Dashboard
    - My Foundation (activo)
    - Animals
    - Adoptions
  - Copyright en la parte inferior
  - Ancho fijo: 256px (w-64)
  - Visible solo en desktop (md+)
- **Header superior**:
  - Menú hamburguesa (solo móvil)
  - Logo + "Amigo Gigante" (solo móvil)
  - Notificaciones (icono)
  - Perfil de usuario (avatar + nombre + email)
  - Borde inferior
- **Área de contenido**:
  - Scrollable
  - Padding responsive
  - Contenedor con max-width

Reglas:
- Usar tokens del Design System.
- Sidebar debe tener estados activos/inactivos para items del menú.
- El layout debe aceptar `children` para renderizar contenido específico de cada página.

---

## Alcance

Incluye:
- Crear layout reutilizable (`DashboardLayout` o similar)
- Implementar sidebar con navegación
- Implementar header superior
- Implementar área de contenido scrollable
- Hacer el layout responsive (sidebar oculto en móvil, visible en desktop)
- Implementar menú hamburguesa para móvil
- Agregar traducciones para navegación del sidebar
- Crear estructura de rutas que use este layout (ej: `app/dashboard/layout.tsx`)

No incluye:
- Contenido específico de páginas (eso va en HUs posteriores)
- Lógica de autenticación (solo UI)
- Navegación funcional real (los links pueden ser placeholders)
- Gestión de estado de usuario (solo UI estática)

---

## Criterios de aceptación (Given / When / Then)

### 1) Layout reutilizable creado

- **Dado** que necesito un layout para el dashboard
- **Cuando** se crea el componente
- **Entonces** existe un layout reutilizable que acepta `children`
- **Y** puede envolver cualquier contenido de página

---

### 2) Sidebar implementado

- **Dado** que estoy en el dashboard
- **Cuando** visualizo en desktop (≥768px)
- **Entonces** veo el sidebar con:
  - Logo + "Amigo Gigante" en la parte superior
  - Menú de navegación (Dashboard, My Foundation, Animals, Adoptions)
  - Copyright en la parte inferior
- **Y** el item activo tiene estilo destacado
- **Y** los items tienen efecto hover

---

### 3) Sidebar responsive

- **Dado** que estoy en el dashboard
- **Cuando** visualizo en móvil (<768px)
- **Entonces** el sidebar está oculto
- **Y** hay un menú hamburguesa en el header
- **Y** al hacer clic en el menú hamburguesa, se muestra un drawer con el sidebar

---

### 4) Header superior implementado

- **Dado** que estoy en el dashboard
- **Cuando** observo el header
- **Entonces** veo:
  - Menú hamburguesa + Logo (solo móvil)
  - Icono de notificaciones
  - Avatar de usuario + nombre + email
- **Y** el header tiene borde inferior
- **Y** está fijo en la parte superior

---

### 5) Área de contenido implementada

- **Dado** que estoy en el dashboard
- **Cuando** observo el área principal
- **Entonces** veo un área scrollable
- **Y** tiene padding responsive
- **Y** acepta contenido dinámico vía `children`

---

### 6) Traducciones implementadas

- **Dado** que se implementa el layout
- **Cuando** se revisa el código
- **Entonces** todos los textos usan `useTranslations` de `next-intl`
- **Y** existen traducciones en `src/messages/es/dashboard.json` y `src/messages/en/dashboard.json`
- **Y** no hay textos hardcodeados

---

### 7) Layout usado en estructura de rutas

- **Dado** que se crea el layout
- **Cuando** se revisa la estructura de rutas
- **Entonces** existe `app/dashboard/layout.tsx` (o similar)
- **Y** el layout envuelve todas las páginas del dashboard
- **Y** las páginas hijas renderizan su contenido en el área principal

---

## Reglas técnicas

### Arquitectura
- Presentation solo consume UseCases vía IoC (no importa repositorios concretos).
- Domain no importa React/Next/MUI/Tailwind/Inversify.
- Infrastructure contiene implementaciones y wiring IoC.
- **Esta HU es solo Presentation**: no toca Domain ni Infrastructure.

### UI
- Usar MUI para componentes base (Drawer, AppBar, List, etc.).
- Tailwind se usa para layout/spacing/responsive utilities.
- Usar tokens del Design System (`brand-500`, `accent-500`, `neutral-*`).
- El layout debe ser un componente reutilizable que acepta `children`.

### Responsive
- Breakpoint principal: `md` (768px) para mostrar/ocultar sidebar.
- Usar `hidden md:flex` para sidebar en desktop.
- Usar `Drawer` de MUI para sidebar en móvil.
- Header debe ser responsive (ocultar logo en desktop, mostrar en móvil).

### Traducciones (OBLIGATORIO)
- **TODOS los textos visibles en la UI deben estar traducidos** (español e inglés).
- Usar el sistema de traducciones configurado en HU-016 (`next-intl`).
- Agregar traducciones en:
  - `src/messages/es/dashboard.json` (español)
  - `src/messages/en/dashboard.json` (inglés)
- Organizar traducciones por secciones: `sidebar`, `header`, etc.
- **NO hardcodear textos en español o inglés** en componentes.
- Usar `useTranslations('dashboard')` hook de `next-intl`.

### Next.js App Router
- Usar `layout.tsx` en `app/dashboard/` para aplicar el layout a todas las rutas hijas.
- El layout debe aceptar `children: React.ReactNode`.

### Dependencias / Paquetes
- No agregar dependencias nuevas salvo que esta HU lo indique explícitamente.
- Si aparece error 403/conectividad:
  1) Detenerse
  2) Pedir dominios requeridos
  3) Explicar por qué se requieren
  4) No continuar

### Git / Branching
- **Al crear la rama para el PR, usar el nombre**: `HU-018 - Layout del dashboard con sidebar`

---

## Implementación sugerida

### Estructura de archivos sugerida:
```
src/app/dashboard/
└── layout.tsx                    # Layout que envuelve todas las páginas del dashboard

src/presentation/components/layouts/
└── DashboardLayout/
    ├── DashboardLayout.tsx       # Componente principal del layout
    ├── DashboardSidebar.tsx      # Sidebar de navegación
    ├── DashboardHeader.tsx        # Header superior
    └── index.ts                  # Exportaciones

src/messages/
├── es/
│   └── dashboard.json            # Traducciones en español
└── en/
    └── dashboard.json            # Traducciones en inglés
```

### Componentes principales:

1. **DashboardLayout** (`src/presentation/components/layouts/DashboardLayout/DashboardLayout.tsx`):
   - Componente principal que estructura el layout
   - Incluye Sidebar, Header y área de contenido
   - Acepta `children` y `activeRoute` (opcional, para marcar item activo)

2. **DashboardSidebar**:
   - Logo + "Amigo Gigante"
   - Menú de navegación con items
   - Copyright
   - Estados activos/inactivos

3. **DashboardHeader**:
   - Menú hamburguesa (móvil)
   - Logo (móvil)
   - Notificaciones
   - Perfil de usuario

4. **app/dashboard/layout.tsx**:
   - Usa `DashboardLayout` para envolver todas las páginas
   - Puede pasar props como `activeRoute` basado en la ruta actual

### Estructura de traducciones sugerida:

**src/messages/es/dashboard.json:**
```json
{
  "sidebar": {
    "dashboard": "Dashboard",
    "myFoundation": "Mi Fundación",
    "animals": "Animales",
    "adoptions": "Adopciones"
  },
  "header": {
    "notifications": "Notificaciones",
    "menu": "Menú"
  },
  "copyright": "© {year} Amigo Gigante"
}
```

**src/messages/en/dashboard.json:**
```json
{
  "sidebar": {
    "dashboard": "Dashboard",
    "myFoundation": "My Foundation",
    "animals": "Animals",
    "adoptions": "Adoptions"
  },
  "header": {
    "notifications": "Notifications",
    "menu": "Menu"
  },
  "copyright": "© {year} Amigo Gigante"
}
```

### Notas de implementación:
- Usar `Drawer` de MUI para el sidebar en móvil.
- El sidebar puede usar `List` y `ListItemButton` de MUI.
- El header puede usar `AppBar` de MUI o un `Box` simple.
- Usar `usePathname` de `next/navigation` para detectar la ruta activa automáticamente.
- El layout debe ser flexible para aceptar diferentes contenidos.

---

## Validación

Comandos mínimos:
- `npm run dev` (verificar que el layout se carga correctamente)
- `npm run build` (verificar que no hay errores de compilación)

Verificaciones visuales:
- El layout se ve igual al diseño de referencia
- El sidebar es responsive (oculto en móvil, visible en desktop)
- El menú hamburguesa funciona en móvil
- Los items del menú tienen estados activos
- Las traducciones funcionan correctamente
- No hay textos hardcodeados

---

## Definición de Hecho

- [ ] Criterios de aceptación cumplidos
- [ ] `npm run dev` OK
- [ ] `npm run build` OK
- [ ] Layout reutilizable creado
- [ ] Sidebar implementado con navegación
- [ ] Sidebar responsive (oculto en móvil, visible en desktop)
- [ ] Header superior implementado
- [ ] Área de contenido implementada
- [ ] Layout usado en estructura de rutas (`app/dashboard/layout.tsx`)
- [ ] **Traducciones incluidas**:
  - [ ] Textos agregados en `src/messages/es/dashboard.json`
  - [ ] Textos agregados en `src/messages/en/dashboard.json`
  - [ ] Componentes usan `useTranslations` (no textos hardcodeados)
  - [ ] Keys consistentes entre idiomas
- [ ] Uso correcto de tokens del Design System
- [ ] Sin violaciones de capas
- [ ] Sin cambios fuera del alcance
- [ ] Rama creada con nombre: `HU-018 - Layout del dashboard con sidebar`
- Commit sugerido:
  `feat: add reusable dashboard layout with sidebar`

