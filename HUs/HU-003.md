# HU-003 — Configurar IoC con Inversify (container + types + módulos)

**Como** desarrollador  
**Quiero** configurar **InversifyJS** en la capa Infrastructure  
**Para** inyectar dependencias sin acoplar Presentation a implementaciones concretas

---

## Dependencias

- Requiere HU-001 y HU-002 completadas.

---

## Criterios de aceptación (Given / When / Then)

1) **Dependencias**
- **Dado** el proyecto base
- **Cuando** se instale Inversify
- **Entonces** deben existir las dependencias:
  - `inversify`
  - `reflect-metadata`

2) **Container base**
- **Dado** `src/infrastructure/ioc`
- **Cuando** se cree el contenedor
- **Entonces** debe existir:
  - `src/infrastructure/ioc/container.ts`

3) **Estructura IoC (types + módulos)**
- **Dado** el contenedor
- **Cuando** se prepare la estructura
- **Entonces** deben existir carpetas y archivos base:
  - `src/infrastructure/ioc/services/services.types.ts`
  - `src/infrastructure/ioc/repositories/repositories.types.ts`
  - `src/infrastructure/ioc/usecases/usecases.types.ts`
  - `src/infrastructure/ioc/services/services.container.ts`
  - `src/infrastructure/ioc/repositories/repositories.container.ts`
  - `src/infrastructure/ioc/usecases/usecases.container.ts`

4) **Smoke test de IoC**
- **Dado** el contenedor configurado
- **Cuando** se registre una dependencia de ejemplo (dummy)
- **Entonces** se debe poder resolver desde el container sin error.

---

## Reglas técnicas

- Todo IoC vive en `src/infrastructure/ioc`.
- Presentation **no** instancia dependencias con `new`.
- Se permite un “dummy service” solo para validar el wiring.
- No agregar Supabase aún (eso va en HU-010).
- No agregar Redux aún (eso va en HU-004).

---

## Implementación sugerida (mínima)

1) En `src/infrastructure/ioc/container.ts`:
- Crear `Container`
- Cargar módulos en orden:
  1. services
  2. repositories
  3. usecases

2) Crear un `ExampleService` (dummy) en:
- `src/infrastructure/services/ExampleService.ts`

3) Registrar `ExampleService` en `services.container.ts` y exponer su símbolo en `services.types.ts`.

4) Crear un pequeño script/test (puede ser unit test o un archivo node ejecutable) para resolverlo.

---

## Definición de Hecho

- `npm run dev` OK
- Al resolver el servicio dummy desde el container no hay errores
- No hay imports de `inversify` dentro de Domain
- Commit sugerido: `chore: setup inversify container`
